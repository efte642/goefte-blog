{% extends "base.html" %}
{% load static %}

{% block content %}
<section class="category-header">
    {% if category %}
        <img src="{{ category.image.url }}" alt="{{ category.name }}" class="category-header-image">
        <h1 class="category-header-title">{{ category.name }}</h1>
    {% endif %}
</section>

<div class="content-container">
    <div class="category-main-content">
        <div class="category-posts-list">
            {% for post in posts %}
                <article class="category-post-item">
                    <a href="{% url 'blog:post_detail' slug=post.slug %}">
                        <div class="category-post-image">
                            {% if post.image %}
                                <img src="{{ post.image.url }}" alt="{{ post.title }}">
                            {% else %}
                                <img src="{% static 'images/default-post.jpg' %}" alt="{{ post.title }}">
                            {% endif %}
                        </div>
                        <div class="category-post-content">
                            <h3 class="post-title">{{ post.title }}</h3>
                            <div class="post-meta">
                                <time datetime="{{ post.created_at|date:'Y-m-d' }}">{{ post.created_at|date:'F d, Y' }}</time>
                            </div>
                            <p class="post-excerpt">{{ post.summary|truncatewords:30 }}</p>
                            <span class="read-more-link">Read More <i class="fas fa-arrow-right"></i></span>
                        </div>
                    </a>
                </article>
            {% empty %}
                <p>No posts found in this category.</p>
            {% endfor %}
        </div>

        <aside class="category-sidebar">
            <div class="sidebar-widget advertisement-widget">
                <h3 class="sidebar-widget-title">Advertisement</h3>
                <a href="#">
                   <img src="https://placehold.co/300x400/eeeeee/cccccc?text=Ad+Space" alt="Advertisement" class="ad-image">
                </a>
            </div>

            <div class="sidebar-widget">
                <h3 class="sidebar-widget-title">Discover More</h3>
                <div class="other-categories-list">
                    {% for cat in categories %}
                        <a href="{% url 'blog:category_posts' slug=cat.slug %}" class="category-item">
                            <div class="category-item-image">
                                {% if cat.image %}
                                    <img src="{{ cat.image.url }}" alt="{{ cat.name }}">
                                {% else %}
                                    <img src="{% static 'images/default-category.jpg' %}" alt="{{ cat.name }}">
                                {% endif %}
                            </div>
                            <h4 class="category-item-name">{{ cat.name }}</h4>
                        </a>
                    {% empty %}
                        <p>No categories found.</p>
                    {% endfor %}
                </div>
            </div>
        </aside>
    </div>
</div>
{% endblock %}
